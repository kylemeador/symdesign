<ROSETTASCRIPTS>

<!--	<SCOREFXNS>-->
<!--		<ScoreFunction name="2015" weights="ref2015">-->
<!--			<Reweight scoretype="coordinate_constraint" weight="%%cst_value%%"/>-->
<!--		</ScoreFunction>-->
<!--	</SCOREFXNS>-->

	<RESIDUE_SELECTORS>
		<True name="full_pose"/>
	</RESIDUE_SELECTORS>

	<MOVERS>
		<DeleteChainsMover name="chainA" chains="%%all_but_A%%" detect_bonds="false" detect_pseudobonds="false"/> # psuedobonds are virtuals
		<DeleteChainsMover name="chainB" chains="%%all_but_B%%" detect_bonds="false" detect_pseudobonds="false"/> # psuedobonds are virtuals
		<DeleteChainsMover name="chainC" chains="%%all_but_C%%" detect_bonds="false" detect_pseudobonds="false"/> # psuedobonds are virtuals
		# saves a intermediate pdb to disk in the directory where Rosetta was initiated
		<!-- <DumpPdb name="dump_pdb_single" fname="single.pdb" scorefxn="2015" tag_time="0"/> -->
		<!-- <DumpPdb name="dump_pdb" fname="sym.pdb" scorefxn="2015" tag_time="0"/> -->
		<AddConstraints name="add_csts">
			<CoordinateConstraintGenerator name="coord_cst_gen" residue_selector="full_pose" sd="0.5" bounded="false" sidechain="false" ca_only="false" ambiguous_hnq="false" native="true" align_reference="false"/> # bounded_width="0" no native pose as this isn't refined, sidechain="false" to constrain backbone heavy atoms, could try ca_only as well. bounded="false" makes constraint type harmonic
		</AddConstraints>
		# Pull subroutines in from other files
		<Subroutine name="metrics_oligomer" xml_fname="%%scripts%%/metrics_scripts/metrics_oligomer.xml"/>
		<Subroutine name="metrics_asu" xml_fname="%%scripts%%/metrics_scripts/metrics_asu.xml"/>
		# Switch reporting to identify which design type or symmetry was selected
		<ParsedProtocol name="oligomer">
			<Add mover_name="metrics_oligomer"/>
		</ParsedProtocol>
		<ParsedProtocol name="no_symmetry">
			<Add mover_name="metrics_asu"/>
		</ParsedProtocol>
		<SwitchMover name="chain_switch" movers="chainA,chainB,chainC" selected="chain%%chain%%"/>
		<SwitchMover name="metrics_symmetry" movers="oligomer,no_symmetry" selected="%%metrics_symmetry%%"/>
	</MOVERS>

	<PROTOCOLS>
		<Add mover_name="add_csts"/>
		<Add mover_name="chain_switch"/>
		<Add mover_name="metrics_symmetry"/>
		<!-- <Add mover_name="dump_pdb"/> -->
	</PROTOCOLS>

</ROSETTASCRIPTS>
